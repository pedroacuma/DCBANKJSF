<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title> Acceso a DCBank </title>
        <h:outputStylesheet  library="css" name="login.css"/>
    </h:head>
    <h:body>
        <div>
            <h1 align="center"> Acceso a DCbank </h1>
            <div align="right">
                <h:form>
                 <h:commandLink value="Español" action="#{language.setEspañol()}"/> |     
                 <h:commandLink value="English" action="#{language.setEnglish()}"/>
                </h:form>
            </div>
            <hr/>
        </div>
        
        <div  class="loginform cf">
            <h:form rendered="#{loginBean.loggedUser == null}">
            
            <h:messages style="color:red"/>
        
            <ul>
                <li>
                    <h:outputLabel  value="DNI"> <h:message id="errorDni" for="userDni" style="color:red"/><br/>
                    <h:inputText id="userDni" label="dni" required="true" value="#{loginBean.dni}" maxlength="9"  requiredMessage=" (Introduzca DNI)">
                       <f:ajax event="blur" render="errorDni" />
                    </h:inputText>
                    </h:outputLabel>
                    
                </li>

                
                <li>
                    <h:outputLabel  value="Contraseña"> <h:message id="errorPwd" for="userPassword" style="color:red"/><br/>
                    <h:inputSecret id="userPassword" label="contraseña" value="#{loginBean.pwd}" maxlength="45" required="true" requiredMessage=" (Introduzca su contraseña)">
                        <f:ajax event="blur" render="errorPwd" />
                    </h:inputSecret>
                    </h:outputLabel>
                </li>
                

                <li>
                    <h:commandButton  id="loginButton" action="#{loginBean.doLogin()}" value="Iniciar Sesión">
                    <f:ajax execute="@form" render="ajaxError errorDni errorPwd"/> 
                    </h:commandButton>
                </li>
                
               <li>
                    <h:outputText value="#{loginBean.error}" id="ajaxError"/>
                    <h:message id="errorLogin" for="loginButton" />
                </li> 

            </ul>
          </h:form>
            
          <h:outputText value="Ya está logueado, acceda a: " rendered="#{loginBean.loggedUser!=null}"/>
          <h:link outcome="empleadoPrincipal" rendered="#{loginBean.loggedUser.rol == 1}" value="Zona Empleado"/>
          <h:link outcome="clientePrincipal" rendered="#{loginBean.loggedUser.rol == 0}" value="Zona Usuario"/>
        </div>
    </h:body>
</html>

